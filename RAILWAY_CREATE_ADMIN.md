# Создание администратора на Railway

Инструкция по созданию администратора после деплоя backend на Railway.

## Способ 1: Через Railway Shell (рекомендуется)

### Шаги:

1. Откройте [Railway Dashboard](https://railway.app)
2. Выберите ваш проект
3. Откройте Backend сервис
4. Перейдите в **Settings** → найдите раздел **"Shell"** или **"Connect"**
5. Нажмите на кнопку для открытия shell
6. Выполните команду:

```bash
python backend/create_admin_auto.py
```

### Ожидаемый результат:

```
✅ Администратор успешно создан!
Username: admin
Password: <случайный пароль>
```

**Важно:** Сохраните пароль! Он будет показан только один раз.

---

## Способ 2: Через Railway CLI

Если у вас установлен Railway CLI:

```bash
# Войдите в Railway
railway login

# Выберите проект
railway link

# Выполните скрипт
railway run python backend/create_admin_auto.py
```

---

## Способ 3: Интерактивное создание

Если нужен контроль над процессом:

```bash
python backend/create_admin.py
```

Скрипт попросит ввести:
- Username (по умолчанию: `admin`)
- Password (будет запрошен)

---

## Способ 4: Через один из скриптов

### Автоматическое создание с дефолтными значениями:

```bash
python backend/create_admin_auto.py
```

### Сброс пароля существующего администратора:

```bash
python backend/reset_admin_password.py
```

---

## Проверка создания администратора

После создания администратора:

1. Откройте frontend: `https://ragbotvladislav-test.up.railway.app`
2. Попробуйте войти с созданными учетными данными
3. Если авторизация работает - администратор создан успешно

---

## Решение проблем

### Ошибка подключения к базе данных

**Проблема:** `Could not connect to database`

**Решение:**
1. Убедитесь, что PostgreSQL сервис запущен в Railway
2. Проверьте, что переменная `DATABASE_URL` установлена в backend сервисе
3. Проверьте логи backend на ошибки подключения

### Ошибка "Admin already exists"

**Проблема:** `Admin user already exists`

**Решение:**
- Администратор уже создан
- Используйте `reset_admin_password.py` для сброса пароля
- Или войдите с существующими учетными данными

### Скрипт не найден

**Проблема:** `python: can't open file 'backend/create_admin_auto.py'`

**Решение:**
1. Убедитесь, что вы находитесь в правильной директории
2. Проверьте путь к файлу: `ls backend/create_admin_auto.py`
3. Используйте полный путь: `python /app/backend/create_admin_auto.py`

---

## Безопасность

**Важно:**
- После создания администратора измените пароль на безопасный
- Не используйте дефолтные пароли в production
- Храните учетные данные в безопасном месте
- Рассмотрите возможность использования переменных окружения для секретов

---

## Дополнительная информация

- Скрипты находятся в директории `backend/`
- `create_admin_auto.py` - автоматическое создание с случайным паролем
- `create_admin.py` - интерактивное создание
- `reset_admin_password.py` - сброс пароля существующего администратора
